(this["webpackJsonptask-manager"]=this["webpackJsonptask-manager"]||[]).push([[0],{103:function(e,t,a){e.exports={siteLayout:"mainPage_siteLayout__1Zeu0",layoutShadow:"mainPage_layoutShadow__1-mUw"}},236:function(e,t,a){},237:function(e,t,a){"use strict";a.r(t);var s,n=a(6),r=a(0),c=a.n(r),u=a(21),i=a.n(u),o=(a(146),a(26)),j=a(19),l=a(49),b=a(101),d=a(38),O=a.n(d),h=a(63),m={SET_SORT_FIELD:"SET_SORT_FIELD ",SET_SORT_DIRECT:"SET_SORT_DIRECT",SET_PAGE_NUM:"SET_PAGE_NUM",SET_TOTAL_TASK_COUNT:"SET_TOTAL_TASK_COUNT",SET_TASKS:"SET_TASKS",EDIT_TASK:"EDIT_TASK",TOGGLE_IS_FETCHING:"TOGGLE_IS_FETCHING",ADD_TASK:"ADD_TASK"},p=a(127).create({baseURL:"https://uxcandy.com/~shapoval/test-task-backend/v2/"}),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"username",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return p.get("?developer=Shamshod&sort_field=".concat(t,"&sort_direction=").concat(a,"&page=").concat(e)).then((function(e){return e.data}))},T=function(e){var t=new FormData;return console.log(e.username),t.append("username",e.username),t.append("email",e.email),t.append("text",e.text),p.post("create/?developer=Shamshod",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},f=function(e,t){var a=new FormData;return a.append("token",t),a.append("status",e.status),a.append("text",e.text),p.post("edit/".concat(e.id,"/?developer=Shamshod"),a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},g=function(e,t){var a=new FormData;return a.append("username",e),a.append("password",t),p.post("login/?developer=Shamshod",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},S=a(243),_={tasks:[{username:"",email:"",text:"",status:0}],pageNum:1,sortField:"username",sortDr:"asc",isFetching:!1,totalTaskCount:4},y=function(e){return{type:m.TOGGLE_IS_FETCHING,isFetching:e}},v=function(e,t,a){return function(){var s=Object(h.a)(O.a.mark((function s(n){var r;return O.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n(y(!0)),n({type:m.SET_PAGE_NUM,pageNum:e}),n({type:m.SET_SORT_FIELD,sort_field:t}),n({type:m.SET_SORT_DIRECT,sortDr:a}),s.next=6,x(e,t,a);case 6:r=s.sent,n((u=r.message.tasks,{type:m.SET_TASKS,tasks:u})),n((c=r.message.total_task_count,{type:m.SET_TOTAL_TASK_COUNT,totalTaskCount:c})),n(y(!1));case 10:case"end":return s.stop()}var c,u}),s)})));return function(e){return s.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SET_TASKS:return Object(j.a)(Object(j.a)({},e),{},{tasks:t.tasks});case m.SET_SORT_FIELD:return Object(j.a)(Object(j.a)({},e),{},{sortField:t.sort_field});case m.SET_SORT_DIRECT:return Object(j.a)(Object(j.a)({},e),{},{sortDr:t.sortDr});case m.TOGGLE_IS_FETCHING:return Object(j.a)(Object(j.a)({},e),{},{isFetching:t.isFetching});case m.SET_PAGE_NUM:return Object(j.a)(Object(j.a)({},e),{},{pageNum:t.pageNum});case m.SET_TOTAL_TASK_COUNT:return Object(j.a)(Object(j.a)({},e),{},{totalTaskCount:t.totalTaskCount});case m.ADD_TASK:return Object(j.a)(Object(j.a)({},e),{},{tasks:[t.task]});default:return e}},E="SET_USER",w="LOG_OUT",C={username:"",userToken:""},A=function(e,t){return{type:E,username:e,userToken:t}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(j.a)(Object(j.a)({},e),{},{username:t.username,userToken:t.userToken});case w:return Object(j.a)(Object(j.a)({},e),{},{username:"",userToken:null});default:return e}},F=Object(l.c)({tasksPage:k,userPage:I}),P=sessionStorage.getItem("reduxState")?JSON.parse(sessionStorage.getItem("reduxState")):null;(s=P?Object(l.d)(F,Object(j.a)(Object(j.a)({},F),{},{userPage:P}),Object(l.a)(b.a)):Object(l.d)(F,Object(j.a)({},F),Object(l.a)(b.a))).subscribe((function(){sessionStorage.setItem("reduxState",JSON.stringify(s.getState().userPage))}));var D=s,N=a(244),L=a(66),G=a(36),U=a(42),R=a(135),K=a(245),M=a(239),H=a(242),q=function(){var e=Object(r.useState)(!1),t=Object(U.a)(e,2),a=t[0],s=t[1],c=M.a.useForm(),u=Object(U.a)(c,1)[0],i=Object(o.b)(),j=Object(o.c)((function(e){return e.userPage.username}));return Object(n.jsxs)(n.Fragment,{children:[j.length>1?Object(n.jsx)(R.a,{type:"primary",ghost:!0,onClick:function(){return i({type:w})},children:"logout"}):Object(n.jsx)(R.a,{type:"primary",onClick:function(){return s(!0)},children:"login"}),Object(n.jsx)(K.a,{title:"LogIn",placement:"right",closable:!1,width:"30%",onClose:function(){s(!1)},visible:a,children:Object(n.jsxs)(M.a,{form:u,name:"basic",onFinish:function(e){i(function(e,t){return function(){var a=Object(h.a)(O.a.mark((function a(s){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g(e,t);case 2:"ok"===(n=a.sent).status?(s(A(e,n.message.token)),S.b.success("Hello ".concat(e,"!"))):S.b.error("Invalid username or password. Please, try again");case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e.username,e.password)),u.resetFields(),s(!1)},children:[Object(n.jsx)(M.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(n.jsx)(H.a,{})}),Object(n.jsx)(M.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(n.jsx)(H.a.Password,{})}),Object(n.jsx)(M.a.Item,{children:Object(n.jsx)(R.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})})]})},J=a(70),$=a(241),Q=a(240),V=a(246),Y=function(e){var t=e.task,a=e.currentQueryParams,s=Object(o.c)((function(e){return e.userPage.userToken})),c=Object(o.b)(),u=Object(r.useState)(!1),i=Object(U.a)(u,2),j=i[0],l=i[1],b=Object(r.useState)(t.text),d=Object(U.a)(b,2),m=d[0],p=d[1],x=Object(r.useState)(t.status),T=Object(U.a)(x,2),g=T[0],_=T[1];return Object(n.jsxs)(Q.a,{hoverable:!0,style:{width:"100%",height:"auto",border:"4px solid ".concat(0===t.status?"red":"green")},cover:t.image_path?Object(n.jsx)("img",{alt:"TaskPhoto",style:{maxHeight:"160px"},src:t.image_path}):Object(n.jsx)("img",{alt:"smallPhoto",style:{maxHeight:"160px"},src:"https://source.unsplash.com/1600x900/?".concat(t.text)}),children:[Object(n.jsxs)("h4",{children:["username: ",t.username.replaceAll("&gt;",">").replaceAll("&lt;","<").replace(/(<([^>]+)>)/gi,"")]}),Object(n.jsx)("br",{}),Object(n.jsxs)("h4",{children:["email: ",t.email]}),Object(n.jsx)("br",{}),j?Object(n.jsxs)("div",{children:[Object(n.jsx)(H.a.TextArea,{value:m,onChange:function(e){p(e.target.value)}}),"Task has done: ",Object(n.jsx)(V.a,{checked:10===g,onChange:function(){_(10===g?0:10)}})]}):Object(n.jsxs)("div",{children:[0===t.status?"Task is :":"Task was :"," ",Object(n.jsx)("span",{dangerouslySetInnerHTML:{__html:t.text}}),Object(n.jsx)("hr",{}),Object(n.jsxs)("span",{children:["status: ",0===t.status?"Let`s do it":"It was great job"]})]}),Object(n.jsx)("br",{}),s&&Object(n.jsx)(R.a,{type:"primary",onClick:function(){l((function(e){return!e})),j&&m.length>0&&c(function(e,t,a){return function(){var s=Object(h.a)(O.a.mark((function s(n){return O.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,f(e,t);case 2:"ok"===s.sent.status?(n(v(a.pageNum,a.sortField,a.sortDr)),S.b.success("successfully edited")):S.b.error("Ups...Unexpected error!");case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}({id:t.id,text:m,status:g},s,a))},children:j?"Submit":"Edit"})]})},z={labelCol:{span:4},wrapperCol:{span:24}},B={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"}},W=function(){var e=M.a.useForm(),t=Object(U.a)(e,1)[0],a=Object(o.b)();return Object(n.jsxs)("div",{children:[Object(n.jsx)("br",{}),Object(n.jsx)(G.a,{offset:8,children:Object(n.jsx)("h2",{children:"Add Your Task"})}),Object(n.jsxs)(M.a,Object(j.a)(Object(j.a)({},z),{},{form:t,initialValues:{username:null,email:null,text:null},name:"nest-messages",onFinish:function(e){var s;a((s=e,function(){var e=Object(h.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(y(!0)),e.next=3,T(s);case 3:a=e.sent,t(y(!1)),"ok"===a.status?(t(v(1,"id","desc")),S.b.success("Task Added")):S.b.error("Upss, something went wrong!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.resetFields()},validateMessages:B,children:[Object(n.jsx)(M.a.Item,{name:"username",label:Object(n.jsx)("h3",{children:"Name"}),rules:[{required:!0}],children:Object(n.jsx)(H.a,{})}),Object(n.jsx)(M.a.Item,{name:"email",label:Object(n.jsx)("h3",{children:"Email"}),rules:[{type:"email",required:!0}],children:Object(n.jsx)(H.a,{})}),Object(n.jsx)(M.a.Item,{name:"text",label:Object(n.jsx)("h3",{children:"Text"}),rules:[{required:!0}],children:Object(n.jsx)(H.a.TextArea,{})}),Object(n.jsx)(M.a.Item,{wrapperCol:Object(j.a)(Object(j.a)({},z.wrapperCol),{},{offset:4}),children:Object(n.jsx)(R.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]})},Z=J.a.Option,X=function(){var e=Object(o.c)((function(e){return e.tasksPage.tasks})),t=Object(o.c)((function(e){return e.tasksPage.pageNum})),a=Object(o.c)((function(e){return e.tasksPage.sortField})),s=Object(o.c)((function(e){return e.tasksPage.sortDr})),c=Object(o.c)((function(e){return e.tasksPage.totalTaskCount})),u=Object(o.b)();return Object(r.useEffect)((function(){u(v(1))}),[u]),Object(n.jsxs)("div",{children:[Object(n.jsxs)(L.a,{justify:"center",gutter:[8,8],children:[Object(n.jsx)(G.a,{children:Object(n.jsx)("h3",{children:"You can sort by: "})}),Object(n.jsx)(G.a,{children:Object(n.jsxs)(J.a,{defaultValue:a,style:{width:120},onChange:function(e){u(v(t,e,s))},children:[Object(n.jsx)(Z,{value:"username",children:"username"}),Object(n.jsx)(Z,{value:"email",children:"email"}),Object(n.jsx)(Z,{value:"status",children:"status"})]})}),Object(n.jsx)(G.a,{children:Object(n.jsx)("h3",{children:" and by "})}),Object(n.jsx)(G.a,{children:Object(n.jsx)(R.a,{type:"primary",shape:"round",onClick:function(){u(v(t,a,"asc"===s?"desc":"asc"))},children:"asc"===s?"asc":"desc"})})]}),Object(n.jsx)("br",{}),Object(n.jsxs)(L.a,{justify:"center",gutter:[8,8],children:[e.map((function(e){return Object(n.jsx)(G.a,{xs:24,md:12,lg:6,children:Object(n.jsx)(Y,{task:e,currentQueryParams:{pageNum:t,sortField:a,sortDr:s}},e.id)},e.id)})),Object(n.jsx)(G.a,{xs:24,md:12,lg:6,children:Object(n.jsx)(W,{})})]}),Object(n.jsx)("br",{}),Object(n.jsx)(L.a,{justify:"center",children:Object(n.jsx)(G.a,{offset:2,children:Object(n.jsx)($.a,{current:t,total:c,pageSize:3,onChange:function(e){u(v(e,a,s))}})})})]})},ee=a(103),te=a.n(ee),ae=function(){var e=Object(o.c)((function(e){return e.tasksPage.isFetching}));return Object(r.useEffect)((function(){e&&S.b.loading("Processing",.2)}),[e]),Object(n.jsx)(N.a,{className:te.a.siteLayout,children:Object(n.jsx)(N.a.Content,{className:te.a.layoutShadow,children:Object(n.jsxs)(L.a,{children:[Object(n.jsx)(G.a,{span:2,children:Object(n.jsx)(q,{})}),Object(n.jsx)(G.a,{offset:8,children:Object(n.jsx)("h1",{children:"WELCOME TO TASK-MANAGER"})}),Object(n.jsx)(X,{})]})})})};a(236);var se=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(o.a,{store:D,children:Object(n.jsx)(ae,{})})})};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(se,{})}),document.getElementById("root"))}},[[237,1,2]]]);
//# sourceMappingURL=main.b0747914.chunk.js.map